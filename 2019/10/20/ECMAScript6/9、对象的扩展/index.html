<!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="ES6,"><meta name="description" content="属性的简洁表示法ES6允许直接写入变量和函数,作为对象的属性和方法.(这在之前是不允许的)直接写入变量: 12345678const foo &#x3D; &amp;apos;bar&amp;apos;;const baz &#x3D; &amp;#123;foo&amp;#125;;baz &#x2F;&#x2F; &amp;#123;foo: &quot;bar&quot;&amp;#125;&#x2F;&#x2F; 等同于const baz &#x3D; &amp;#123;foo: foo&amp;#125;;&#x2F;&#x2F;当属性名与变量名相等时可以只写一个属性名"><meta name="keywords" content="ES6"><meta property="og:type" content="article"><meta property="og:title" content="ECMAScript6--对象的扩展"><meta property="og:url" content="http:&#x2F;&#x2F;www.friendk.cn:8888&#x2F;2019&#x2F;10&#x2F;20&#x2F;ECMAScript6&#x2F;9%E3%80%81%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A9%E5%B1%95&#x2F;index.html"><meta property="og:site_name" content="友人K"><meta property="og:description" content="属性的简洁表示法ES6允许直接写入变量和函数,作为对象的属性和方法.(这在之前是不允许的)直接写入变量: 12345678const foo &#x3D; &amp;apos;bar&amp;apos;;const baz &#x3D; &amp;#123;foo&amp;#125;;baz &#x2F;&#x2F; &amp;#123;foo: &quot;bar&quot;&amp;#125;&#x2F;&#x2F; 等同于const baz &#x3D; &amp;#123;foo: foo&amp;#125;;&#x2F;&#x2F;当属性名与变量名相等时可以只写一个属性名"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https:&#x2F;&#x2F;qqadapt.qpic.cn&#x2F;txdocpic&#x2F;0&#x2F;dc0f131b73a08bbf08b5e96faaf768e6&#x2F;0"><meta property="og:updated_time" content="2019-12-09T14:13:10.614Z"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https:&#x2F;&#x2F;qqadapt.qpic.cn&#x2F;txdocpic&#x2F;0&#x2F;dc0f131b73a08bbf08b5e96faaf768e6&#x2F;0"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"5.1.4",sidebar:{position:"left",display:"hide",offset:12,b2t:!1,scrollpercent:!0,onmobile:!0},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://www.friendk.cn:8888/2019/10/20/ECMAScript6/9、对象的扩展/"><script>let win = window.navigator.userAgent.toLowerCase();
	if(/mobi|android|touch|mini/i.test(win)){
		console.log(win);
	}else{
		(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/50da685b.js","daovoice")
		daovoice('init', {
		   app_id: "50da685b"
		});
		daovoice('update');
	}</script><title>ECMAScript6--对象的扩展 | 友人K</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">友人K</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>公益404</a></li><li class="menu-item menu-item-search"><a href="javascript:void(0);" target="" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://www.friendk.cn:8888/2019/10/20/ECMAScript6/9%E3%80%81%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A9%E5%B1%95/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="刘凯"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="友人K"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">ECMAScript6--对象的扩展</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-20T16:30:00+08:00">2019-10-20 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">前端开发</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/ES6%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">ES6学习</span> </a></span></span><span class="post-meta-divider">|</span> <span class="page-pv"><i class="fa fa-file-o">本文总阅读量</i> <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>次</span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">4.4k </span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">18</span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="属性的简洁表示法"><a href="#属性的简洁表示法" class="headerlink" title="属性的简洁表示法"></a>属性的简洁表示法</h1><p>ES6允许直接写入变量和函数,作为对象的属性和方法.(这在之前是不允许的)<br>直接写入变量:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> foo = <span class="string">'bar'</span>;</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> baz = &#123;foo&#125;;</span></code><br><code class="highlight javascript"><span class="line">baz <span class="comment">// &#123;foo: "bar"&#125;</span></span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// 等同于</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> baz = &#123;<span class="attr">foo</span>: foo&#125;;</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//当属性名与变量名相等时可以只写一个属性名</span></span></code><br></pre></td></tr></table></figure><a id="more"></a><p>方法的简写</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> o = &#123;</span></code><br><code class="highlight javascript"><span class="line">  method() &#123;</span></code><br><code class="highlight javascript"><span class="line">    <span class="keyword">return</span> <span class="string">"Hello!"</span>;</span></code><br><code class="highlight javascript"><span class="line">  &#125;</span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// 等同于</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> o = &#123;</span></code><br><code class="highlight javascript"><span class="line">  method: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></code><br><code class="highlight javascript"><span class="line">    <span class="keyword">return</span> <span class="string">"Hello!"</span>;</span></code><br><code class="highlight javascript"><span class="line">  &#125;</span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br></pre></td></tr></table></figure><p>如果某个方法的值是一个Generator函数,前面需要加上星号</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> obj = &#123;</span></code><br><code class="highlight javascript"><span class="line">  * m() &#123;</span></code><br><code class="highlight javascript"><span class="line">    <span class="keyword">yield</span> <span class="string">'hello world'</span>;</span></code><br><code class="highlight javascript"><span class="line">  &#125;</span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br></pre></td></tr></table></figure><h1 id="属性名表达式"><a href="#属性名表达式" class="headerlink" title="属性名表达式"></a>属性名表达式</h1><p>JavaScript定义对象的属性:</p><ul><li>方法一: <code>obj.foo = true</code>;</li><li>方法二(属性名表达式): <code>obj[&#39;a&#39; + &#39;bc&#39;] = 123</code>;</li></ul><p>中括号中还可以放入变量名<br>ES6之前,使用字面量方式定义对象(使用大括号),只能使用方法一的形式:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">var</span> obj = &#123;</span></code><br><code class="highlight javascript"><span class="line">  foo: <span class="literal">true</span>,</span></code><br><code class="highlight javascript"><span class="line">  abc: <span class="number">123</span></span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br></pre></td></tr></table></figure><p>ES6允许字面量定义对象时,用方法二作为对象的属性名,即把表达式放在方括号内:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">let</span> propKey = <span class="string">'foo'</span>;</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">let</span> obj = &#123;</span></code><br><code class="highlight javascript"><span class="line">  [propKey]: <span class="literal">true</span>,</span></code><br><code class="highlight javascript"><span class="line">  [<span class="string">'a'</span> + <span class="string">'bc'</span>]: <span class="number">123</span></span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br></pre></td></tr></table></figure><p>使用方法二定义方法名:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">let</span> obj = &#123;</span></code><br><code class="highlight javascript"><span class="line">  [<span class="string">'h'</span> + <span class="string">'ello'</span>]() &#123;</span></code><br><code class="highlight javascript"><span class="line">    <span class="keyword">return</span> <span class="string">'hi'</span>;</span></code><br><code class="highlight javascript"><span class="line">  &#125;</span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line">obj.hello() <span class="comment">// hi</span></span></code><br></pre></td></tr></table></figure><blockquote><p>注意:</p><ul><li>属性名表达式不能与简洁表达式同时使用</li><li>属性名表达式如果是一个对象,默认情况下会自动转为字符串[object,object],(会覆盖掉别的属性名表达式为对象的值)</li></ul></blockquote><h1 id="方法的name属性"><a href="#方法的name属性" class="headerlink" title="方法的name属性"></a>方法的name属性</h1><p>函数的name属性,返回函数名. 对象方法也是函数,因此也有name属性</p><p>如果对象的方法使用了取值函数(getter)和存值函数(setter),则name属性不是在该方法上面,而是该方法的属性的描述对象get和set属性上面,返回值是方法名前加上get和set</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> obj = &#123;</span></code><br><code class="highlight javascript"><span class="line">  <span class="keyword">get</span> foo() &#123;&#125;,</span></code><br><code class="highlight javascript"><span class="line">  <span class="keyword">set</span> foo(x) &#123;&#125;</span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line">obj.foo.name</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// TypeError: Cannot read property 'name' of undefined</span></span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> descriptor = <span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, <span class="string">'foo'</span>);</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line">descriptor.get.name <span class="comment">// "get foo"</span></span></code><br><code class="highlight javascript"><span class="line">descriptor.set.name <span class="comment">// "set foo"</span></span></code><br></pre></td></tr></table></figure><p>特殊情况:</p><ul><li>bind方法创造的函数,name属性返回bound加上原函数的名字</li><li>Function构造函数创造的函数,name属性返回anonymous</li><li>如果对象的方法是一个Symbol,那么name属性返回的是这个Symbol值的描述</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> key1 = <span class="built_in">Symbol</span>(<span class="string">'description'</span>);</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> key2 = <span class="built_in">Symbol</span>();</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">let</span> obj = &#123;</span></code><br><code class="highlight javascript"><span class="line">  [key1]() &#123;&#125;,</span></code><br><code class="highlight javascript"><span class="line">  [key2]() &#123;&#125;,</span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br><code class="highlight javascript"><span class="line">obj[key1].name <span class="comment">// "[description]"</span></span></code><br><code class="highlight javascript"><span class="line">obj[key2].name <span class="comment">// ""</span></span></code><br></pre></td></tr></table></figure><h1 id="属性的可枚举性和遍历"><a href="#属性的可枚举性和遍历" class="headerlink" title="属性的可枚举性和遍历"></a>属性的可枚举性和遍历</h1><h2 id="可枚举性"><a href="#可枚举性" class="headerlink" title="可枚举性"></a>可枚举性</h2><p>对象的每个属性都有一个描述对象(Descriptor),用来控制该属性的行为.</p><p>ES5的<code>Object.getOwnPropertyDescriptor</code>方法可以获取该属性的描述对象.</p><p>描述对象的enumerable属性,称为”可枚举性”,如果该属性为false,就表示某些操作会忽略当前属性</p><p>目前,有四个操作会忽略enumerable为false的属性:</p><ul><li><code>for...in</code>循环：只遍历对象自身的和继承的可枚举的属性。</li><li><code>Object.keys()</code>：返回对象自身的所有可枚举的属性的键名。</li><li><code>JSON.stringify()</code>：只串行化对象自身的可枚举的属性。</li><li><code>Object.assign()</code>： 忽略enumerable为false的属性，只拷贝对象自身的可枚举的属性。</li></ul><p>上面四个方法中,只有for…in会返回继承的属性,其他三个方法都会忽略继承的属性,只处理对象自身的属性<br><strong>注意:</strong><br>所有 Class 的原型的方法都是不可枚举的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(<span class="class"><span class="keyword">class</span></span>&#123;foo()&#123;&#125;&#125;.prototype, <span class="string">'foo'</span>)</span></code><br><code class="highlight javascript"><span class="line">.enumerable</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// false</span></span></code><br></pre></td></tr></table></figure><h2 id="属性的遍历"><a href="#属性的遍历" class="headerlink" title="属性的遍历"></a>属性的遍历</h2><p>ES6一共有5中方法可以遍历对象的属性</p><h3 id="for…in"><a href="#for…in" class="headerlink" title="for…in"></a>for…in</h3><p><code>for...in</code>循环遍历对象自身的和继承的可枚举属性（不含 Symbol 属性）</p><h3 id="Object-keys-obj"><a href="#Object-keys-obj" class="headerlink" title="Object.keys(obj)"></a>Object.keys(obj)</h3><p><code>Object.keys</code>返回一个数组，包括对象自身的（不含继承的）所有可枚举属性（不含 Symbol 属性）的键名。</p><h3 id="Object-getOwnPropertyNames-obj"><a href="#Object-getOwnPropertyNames-obj" class="headerlink" title="Object.getOwnPropertyNames(obj)"></a>Object.getOwnPropertyNames(obj)</h3><p><code>Object.getOwnPropertyNames</code>返回一个数组，包含对象自身的所有属性（不含 Symbol 属性，但是包括不可枚举属性）的键名。</p><h3 id="Object-getOwnPropertySymbols-obj"><a href="#Object-getOwnPropertySymbols-obj" class="headerlink" title="Object.getOwnPropertySymbols(obj)"></a>Object.getOwnPropertySymbols(obj)</h3><p><code>Object.getOwnPropertySymbols</code>返回一个数组，包含对象自身的所有 Symbol 属性的键名。</p><h3 id="Reflect-ownKeys-obj"><a href="#Reflect-ownKeys-obj" class="headerlink" title="Reflect.ownKeys(obj)"></a>Reflect.ownKeys(obj)</h3><p><code>Reflect.ownKeys</code>返回一个数组，包含对象自身的所有键名，不管键名是 Symbol 或字符串，也不管是否可枚举。<br>以上的5种方法遍历对象的键名,都遵守同样的属性遍历的次序规则:</p><ul><li>首先遍历所有数值键，按照数值升序排列。</li><li>其次遍历所有字符串键，按照加入时间升序排列。</li><li>最后遍历所有 Symbol 键，按照加入时间升序排列。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="built_in">Reflect</span>.ownKeys(&#123; [<span class="built_in">Symbol</span>()]:<span class="number">0</span>, <span class="attr">b</span>:<span class="number">0</span>, <span class="number">10</span>:<span class="number">0</span>, <span class="number">2</span>:<span class="number">0</span>, <span class="attr">a</span>:<span class="number">0</span> &#125;)</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// ['2', '10', 'b', 'a', Symbol()]</span></span></code><br></pre></td></tr></table></figure><h1 id="super关键字"><a href="#super关键字" class="headerlink" title="super关键字"></a>super关键字</h1><p>super关键字指向当前对象的原型对象</p><p><strong>注意:</strong><br>该关键字只有用在对象方法的简写法里面才有效,否则会报错</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="comment">// 报错</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> obj = &#123;</span></code><br><code class="highlight javascript"><span class="line">  foo: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></code><br><code class="highlight javascript"><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.foo</span></code><br><code class="highlight javascript"><span class="line">  &#125;</span></code><br><code class="highlight javascript"><span class="line">&#125;</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//方法简写法</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> proto = &#123;</span></code><br><code class="highlight javascript"><span class="line">  foo: <span class="string">'hello'</span></span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> obj = &#123;</span></code><br><code class="highlight javascript"><span class="line">  foo: <span class="string">'world'</span>,</span></code><br><code class="highlight javascript"><span class="line">  find() &#123;</span></code><br><code class="highlight javascript"><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.foo;</span></code><br><code class="highlight javascript"><span class="line">  &#125;</span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.setPrototypeOf(obj, proto);</span></code><br><code class="highlight javascript"><span class="line">obj.find() <span class="comment">// "hello"</span></span></code><br></pre></td></tr></table></figure><h1 id="对象的扩展运算符"><a href="#对象的扩展运算符" class="headerlink" title="对象的扩展运算符"></a>对象的扩展运算符</h1><h2 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h2><p>扩展运算符用于解构赋值,必须位于最后一个参数,会将所有为被读取的属性和值一起拷贝到新对象上面</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">let</span> &#123; x, y, ...z &#125; = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">b</span>: <span class="number">4</span> &#125;;</span></code><br><code class="highlight javascript"><span class="line">x <span class="comment">// 1</span></span></code><br><code class="highlight javascript"><span class="line">y <span class="comment">// 2</span></span></code><br><code class="highlight javascript"><span class="line">z <span class="comment">// &#123; a: 3, b: 4 &#125;</span></span></code><br></pre></td></tr></table></figure><p><strong>注意:</strong></p><ul><li>由于解构赋值要求等号右边是一个对象，所以如果等号右边是undefined或null,就会报错,因为它们无法转为对象</li><li>扩展运算符的解构赋值不能复制继承自原型的属性</li><li>解构赋值的拷贝是浅拷贝</li></ul><p>解构赋值还可以用于扩展某个函数的参数:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">baseFunction</span>(<span class="params">&#123; a, b &#125;</span>) </span>&#123;</span></code><br><code class="highlight javascript"><span class="line">  <span class="comment">// ...</span></span></code><br><code class="highlight javascript"><span class="line">&#125;</span></code><br><code class="highlight javascript"><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wrapperFunction</span>(<span class="params">&#123; x, y, ...restConfig &#125;</span>) </span>&#123;</span></code><br><code class="highlight javascript"><span class="line">  <span class="comment">// 使用 x 和 y 参数进行操作</span></span></code><br><code class="highlight javascript"><span class="line">  <span class="comment">// 其余参数传给原始函数</span></span></code><br><code class="highlight javascript"><span class="line">  <span class="keyword">return</span> baseFunction(restConfig);</span></code><br><code class="highlight javascript"><span class="line">&#125;</span></code><br></pre></td></tr></table></figure><h2 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h2><p>对象的扩展运算符 ( … ) 用于取出参数对象的所有可遍历属性,拷贝到当前对象之中</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">let</span> z = &#123; <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">b</span>: <span class="number">4</span> &#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">let</span> n = &#123; ...z &#125;;</span></code><br><code class="highlight javascript"><span class="line">n <span class="comment">// &#123; a: 3, b: 4 &#125;</span></span></code><br></pre></td></tr></table></figure><p>由于数组是特殊的对象,所以对象的扩展运算符也可以用于数组</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">let</span> foo = &#123; ...[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>] &#125;;</span></code><br><code class="highlight javascript"><span class="line">foo</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// &#123;0: "a", 1: "b", 2: "c"&#125;</span></span></code><br></pre></td></tr></table></figure><p><strong>规则:</strong></p><ul><li>如果扩展运算符后面是一个空对象,则没有任何效果</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line">&#123;...&#123;&#125;, <span class="attr">a</span>: <span class="number">1</span>&#125;</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// &#123; a: 1 &#125;</span></span></code><br></pre></td></tr></table></figure><ul><li>如果扩展运算符后面不是对象,则会自动将其转为对象</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="comment">// 等同于 &#123;...Object(1)&#125;</span></span></code><br><code class="highlight javascript"><span class="line">&#123;..<span class="number">.1</span>&#125; <span class="comment">// &#123;&#125;</span></span></code><br></pre></td></tr></table></figure><ul><li>如果扩展运算符后面是字符串,它会自动转成一个类似数组的对象</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line">&#123;...<span class="string">'hello'</span>&#125;</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// &#123;0: "h", 1: "e", 2: "l", 3: "l", 4: "o"&#125;</span></span></code><br></pre></td></tr></table></figure><p>上面的例子只是拷贝了对象实例的属性，如果想完整克隆一个对象，还拷贝对象原型的属性，可以采用下面的写法。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="comment">// 写法一</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> clone1 = &#123;</span></code><br><code class="highlight javascript"><span class="line">  __proto__: <span class="built_in">Object</span>.getPrototypeOf(obj),</span></code><br><code class="highlight javascript"><span class="line">  ...obj</span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// 写法二</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> clone2 = <span class="built_in">Object</span>.assign(</span></code><br><code class="highlight javascript"><span class="line">  <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.getPrototypeOf(obj)),</span></code><br><code class="highlight javascript"><span class="line">  obj</span></code><br><code class="highlight javascript"><span class="line">);</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// 写法三</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> clone3 = <span class="built_in">Object</span>.create(</span></code><br><code class="highlight javascript"><span class="line">  <span class="built_in">Object</span>.getPrototypeOf(obj),</span></code><br><code class="highlight javascript"><span class="line">  <span class="built_in">Object</span>.getOwnPropertyDescriptors(obj)</span></code><br><code class="highlight javascript"><span class="line">)</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//推荐使用写法一和写法二</span></span></code><br></pre></td></tr></table></figure><p>扩展运算符等同于使用<code>Object.assign()</code>方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">let</span> aClone = &#123; ...a &#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// 等同于</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">let</span> aClone = <span class="built_in">Object</span>.assign(&#123;&#125;, a);</span></code><br></pre></td></tr></table></figure><p>扩展运算符可以用于合并两个对象:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">let</span> ab = &#123; ...a, ...b &#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// 等同于</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">let</span> ab = <span class="built_in">Object</span>.assign(&#123;&#125;, a, b);</span></code><br></pre></td></tr></table></figure><p>注意:</p><ul><li>如果用户自定义的属性,放在扩展运算符后面,则扩展运算符内部的同名属性会被覆盖掉</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">let</span> a = &#123;<span class="attr">x</span>:<span class="number">3</span>,<span class="attr">y</span>:<span class="number">4</span>&#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">let</span> aWithOverrides = &#123; ...a, <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span></code><br><code class="highlight javascript"><span class="line">x    <span class="comment">//1</span></span></code><br><code class="highlight javascript"><span class="line">y    <span class="comment">//2</span></span></code><br></pre></td></tr></table></figure><ul><li>如果把自定义属性放在扩展运算符前面，就变成了设置新对象的默认属性值。</li><li>与数组的扩展运算符一样，对象的扩展运算符后面可以跟表达式。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> obj = &#123;</span></code><br><code class="highlight javascript"><span class="line">  ...(x &gt; <span class="number">1</span> ? &#123;<span class="attr">a</span>: <span class="number">1</span>&#125; : &#123;&#125;),</span></code><br><code class="highlight javascript"><span class="line">  b: <span class="number">2</span>,</span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br></pre></td></tr></table></figure><p>​ <img src="https://qqadapt.qpic.cn/txdocpic/0/dc0f131b73a08bbf08b5e96faaf768e6/0" alt="img"></p><h1 id="对象的新增方法"><a href="#对象的新增方法" class="headerlink" title="对象的新增方法"></a>对象的新增方法</h1><h2 id="Object-is"><a href="#Object-is" class="headerlink" title="Object.is()"></a>Object.is()</h2><p>ES5 比较两个值是否相等，只有两个运算符：相等运算符 ( == ) 和严格相等运算符 ( === ) ,它们都有缺点，前者会自动转换数据类型,后者的<code>NaN</code>不等于自身,以及+0 等于 -0</p><p>JavaScript缺乏一种算法在所有环境中，只要两个值是一样的，它们就应该相等。<br>ES6 提出“Same-value equality”（同值相等）算法，用来解决这个问题。<br><code>Object.is()</code>就是部署这个算法的新方法。它用来比较两个值是否严格相等，与严格比较运算符（===）的行为基本一致。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.is(<span class="string">'foo'</span>, <span class="string">'foo'</span>)</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// true</span></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.is(&#123;&#125;, &#123;&#125;)</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// false</span></span></code><br></pre></td></tr></table></figure><p><strong>注意:</strong></p><ul><li>该方法中 +0不等于-0</li><li><code>NaN</code>等于自身</li></ul><h2 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign()"></a>Object.assign()</h2><h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a><strong>基本用法</strong></h3><p><code>Object.assign</code>方法用于对象的合并,将源对象（source）的所有可枚举属性，复制到目标对象（target）。<br><code>Object.assign</code>方法的第一个参数是目标对象,后面的所有参数都是源对象</p><ul><li>如果目标对象与源对象有同名属性，或多个源对象有同名属性，则后面的属性会覆盖前面的属性。</li><li>如果只有一个参数,Object.assign方法会直接返回该参数</li><li>如果该参数不是对象，则会先转成对象，然后返回。</li><li>由于undefined和null无法转为对象,所以如果他们作为参数(首参数)会报错</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="comment">//首参数</span></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.assign(<span class="literal">undefined</span>) <span class="comment">// 报错</span></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.assign(<span class="literal">null</span>) <span class="comment">// 报错</span></span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//非首参数</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.assign(obj, <span class="literal">undefined</span>) === obj <span class="comment">// true</span></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.assign(obj, <span class="literal">null</span>) === obj <span class="comment">// true</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//非对象作为非首参数传入时,这些参数都会转为对象,如果无法转为对象,就会跳过</span></span></code><br></pre></td></tr></table></figure><ul><li>其他类型的值（即数值、字符串和布尔值）不在首参数，也不会报错,除了字符串会以数组的形式拷贝入对象,其他值都不会产生效果</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> v1 = <span class="string">'abc'</span>;</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> v2 = <span class="literal">true</span>;</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> v3 = <span class="number">10</span>;</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> obj = <span class="built_in">Object</span>.assign(&#123;&#125;, v1, v2, v3);</span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">console</span>.log(obj); <span class="comment">// &#123; "0": "a", "1": "b", "2": "c" &#125;</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//Object(true) // &#123;[[PrimitiveValue]]: true&#125;</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//Object(10)  //  &#123;[[PrimitiveValue]]: 10&#125;</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//Object('abc')//&#123;0:"a",1:"b",2:"c",length:3,[[PrimitiveValue]]:"abc"&#125;</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//PrimitiveValue不可以被枚举</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//上面三种类型的值转换为包装对象后,只有字符串有可枚举的实义属性</span></span></code><br></pre></td></tr></table></figure><p><strong>注意:</strong></p><ul><li>浅拷贝: 如果源对象某个属性的值是对象，那么目标对象拷贝得到的是这个对象的引用。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> obj1 = &#123;<span class="attr">a</span>: &#123;<span class="attr">b</span>: <span class="number">1</span>&#125;&#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> obj2 = <span class="built_in">Object</span>.assign(&#123;&#125;, obj1);</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line">obj1.a.b = <span class="number">2</span>;</span></code><br><code class="highlight javascript"><span class="line">obj2.a.b <span class="comment">// 2</span></span></code><br></pre></td></tr></table></figure><ul><li>同名属性的替换: 目标对象与一个或多个源对象有同名属性时,后面的属性会覆盖前面的</li><li>数组的处理: <code>Object.assign</code>方法会把数组当作对象处理(数组的索引即为对象的属性名)</li><li>取值函数的处理:<code>Object.assign</code>方法只能进行值的复制，如果要复制的值是一个取值函数，那么将求值后再复制。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> source = &#123;</span></code><br><code class="highlight javascript"><span class="line">  <span class="keyword">get</span> foo() &#123; <span class="keyword">return</span> <span class="number">1</span> &#125;</span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> target = &#123;&#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.assign(target, source)</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// &#123; foo: 1 &#125;</span></span></code><br></pre></td></tr></table></figure><ul><li><code>Object.assign</code>方法拷贝的属性是有限制的，只拷贝源对象的自身属性（不拷贝继承属性），也不拷贝不可枚举的属性(<code>enumerable:false</code>)</li><li>属性名为 Symbol 值的属性，也会被<code>Object.assign()</code>拷贝</li></ul><h3 id="常见用途"><a href="#常见用途" class="headerlink" title="常见用途"></a>常见用途</h3><p>1.为对象添加属性</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span></code><br><code class="highlight javascript"><span class="line">  <span class="keyword">constructor</span>(x, y) &#123;</span></code><br><code class="highlight javascript"><span class="line">    <span class="built_in">Object</span>.assign(<span class="keyword">this</span>, &#123;x, y&#125;);</span></code><br><code class="highlight javascript"><span class="line">  &#125;</span></code><br><code class="highlight javascript"><span class="line">&#125;</span></code><br></pre></td></tr></table></figure><p>2.为对象添加方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.assign(SomeClass.prototype, &#123;</span></code><br><code class="highlight javascript"><span class="line">  someMethod(arg1, arg2) &#123;</span></code><br><code class="highlight javascript"><span class="line">    ···</span></code><br><code class="highlight javascript"><span class="line">  &#125;,</span></code><br><code class="highlight javascript"><span class="line">  anotherMethod() &#123;</span></code><br><code class="highlight javascript"><span class="line">    ···</span></code><br><code class="highlight javascript"><span class="line">  &#125;</span></code><br><code class="highlight javascript"><span class="line">&#125;);</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// 等同于下面的写法</span></span></code><br><code class="highlight javascript"><span class="line">SomeClass.prototype.someMethod = <span class="function"><span class="keyword">function</span> (<span class="params">arg1, arg2</span>) </span>&#123;</span></code><br><code class="highlight javascript"><span class="line">  ···</span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br><code class="highlight javascript"><span class="line">SomeClass.prototype.anotherMethod = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></code><br><code class="highlight javascript"><span class="line">  ···</span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br></pre></td></tr></table></figure><p>3.克隆对象</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">origin</span>) </span>&#123;</span></code><br><code class="highlight javascript"><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.assign(&#123;&#125;, origin);</span></code><br><code class="highlight javascript"><span class="line">&#125;</span></code><br></pre></td></tr></table></figure><p>上面代码将原始对象拷贝到一个空对象，就得到了原始对象的克隆。</p><p>不过，采用这种方法克隆，只能克隆原始对象自身的值，不能克隆它继承的值。如果想要保持继承链，可以采用下面的代码。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">origin</span>) </span>&#123;</span></code><br><code class="highlight javascript"><span class="line">  <span class="keyword">let</span> originProto = <span class="built_in">Object</span>.getPrototypeOf(origin);</span></code><br><code class="highlight javascript"><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.assign(<span class="built_in">Object</span>.create(originProto), origin);</span></code><br><code class="highlight javascript"><span class="line">&#125;</span></code><br></pre></td></tr></table></figure><p>4.合并多个对象</p><p>将多个对象合并到某个对象</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> merge =</span></code><br><code class="highlight javascript"><span class="line">  (target, ...sources) =&gt; <span class="built_in">Object</span>.assign(target, ...sources);</span></code><br></pre></td></tr></table></figure><p>5.为属性指定默认值</p><p>利用同名属性替换的特点,可以将默认值对象写在前面,后面跟源对象</p><h2 id="Object-getOwnPropertyDescriptors"><a href="#Object-getOwnPropertyDescriptors" class="headerlink" title="Object.getOwnPropertyDescriptors()"></a>Object.getOwnPropertyDescriptors()</h2><p>ES5的<code>Object.getOwnPropertyDescriptor()</code>方法会返回某个对象属性的描述对象(descriptor)<br>ES2017引入了<code>Object.getOwnPropertyDescriptors()</code>方法,返回指定对象所有自身属性(非继承属性)的描述对象</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> obj = &#123;</span></code><br><code class="highlight javascript"><span class="line">  foo: <span class="number">123</span>,</span></code><br><code class="highlight javascript"><span class="line">  <span class="keyword">get</span> bar() &#123; <span class="keyword">return</span> <span class="string">'abc'</span> &#125;</span></code><br><code class="highlight javascript"><span class="line">&#125;;</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptors(obj)</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// &#123; foo:</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//    &#123; value: 123,</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//      writable: true,</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//      enumerable: true,</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//      configurable: true &#125;,</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//   bar:</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//    &#123; get: [Function: get bar],</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//      set: undefined,</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//      enumerable: true,</span></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//      configurable: true &#125; &#125;</span></span></code><br></pre></td></tr></table></figure><p><strong>用处一:</strong></p><p>该方法的引入目的,主要是为了解决<code>Object.assign()</code>无法正确拷贝get属性和set属性的问题</p><p>使用<code>Object.getOwnPropertyDescriptor()</code>方法配合<code>Object.defineProperties()</code>方法,就可以实现正确拷贝:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="highlight plain"><span class="line">const source &#x3D; &#123;</span></code><br><code class="highlight plain"><span class="line">  set foo(value) &#123;</span></code><br><code class="highlight plain"><span class="line">    console.log(value);</span></code><br><code class="highlight plain"><span class="line">  &#125;</span></code><br><code class="highlight plain"><span class="line">&#125;;</span></code><br><code class="highlight plain"><span class="line">const target2 &#x3D; &#123;&#125;;</span></code><br><code class="highlight plain"><span class="line">Object.defineProperties(target2, Object.getOwnPropertyDescriptors(source));</span></code><br><code class="highlight plain"><span class="line">Object.getOwnPropertyDescriptor(target2, &#39;foo&#39;)</span></code><br><code class="highlight plain"><span class="line">&#x2F;&#x2F; &#123; get: undefined,</span></code><br><code class="highlight plain"><span class="line">&#x2F;&#x2F;   set: [Function: set foo],</span></code><br><code class="highlight plain"><span class="line">&#x2F;&#x2F;   enumerable: true,</span></code><br><code class="highlight plain"><span class="line">&#x2F;&#x2F;   configurable: true &#125;</span></code><br></pre></td></tr></table></figure><p>上面代码中,两个对象合并的逻辑可以写成一个函数:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> shallowMerge = <span class="function">(<span class="params">target, source</span>) =&gt;</span> <span class="built_in">Object</span>.defineProperties(</span></code><br><code class="highlight javascript"><span class="line">  target,</span></code><br><code class="highlight javascript"><span class="line">  <span class="built_in">Object</span>.getOwnPropertyDescriptors(source)</span></code><br><code class="highlight javascript"><span class="line">);</span></code><br></pre></td></tr></table></figure><p><strong>用处二:</strong></p><p>配合<code>Object.create()</code>方法,将对象属性克隆到一个新对象(这属于浅拷贝).</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> clone = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.getPrototypeOf(obj),</span></code><br><code class="highlight javascript"><span class="line">  <span class="built_in">Object</span>.getOwnPropertyDescriptors(obj));</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// 或者</span></span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> shallowClone = <span class="function">(<span class="params">obj</span>) =&gt;</span> <span class="built_in">Object</span>.create(</span></code><br><code class="highlight javascript"><span class="line">  <span class="built_in">Object</span>.getPrototypeOf(obj),</span></code><br><code class="highlight javascript"><span class="line">  <span class="built_in">Object</span>.getOwnPropertyDescriptors(obj)</span></code><br><code class="highlight javascript"><span class="line">);</span></code><br></pre></td></tr></table></figure><p><strong>用处三:</strong></p><p>实现一个对象继承另一个对象</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> obj = <span class="built_in">Object</span>.create(</span></code><br><code class="highlight javascript"><span class="line">  prot,</span></code><br><code class="highlight javascript"><span class="line">  <span class="built_in">Object</span>.getOwnPropertyDescriptors(&#123;</span></code><br><code class="highlight javascript"><span class="line">    foo: <span class="number">123</span>,</span></code><br><code class="highlight javascript"><span class="line">  &#125;)</span></code><br><code class="highlight javascript"><span class="line">);</span></code><br></pre></td></tr></table></figure><p><strong>用处四:</strong></p><p><code>Object.getOwnPropertyDescriptors()</code>可以实现<code>Mixin</code>(混入)模式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">let</span> mix = <span class="function">(<span class="params">object</span>) =&gt;</span> (&#123;</span></code><br><code class="highlight javascript"><span class="line">  <span class="keyword">with</span>: <span class="function">(<span class="params">...mixins</span>) =&gt;</span> mixins.reduce(</span></code><br><code class="highlight javascript"><span class="line">    (c, mixin) =&gt; <span class="built_in">Object</span>.create(</span></code><br><code class="highlight javascript"><span class="line">      c, <span class="built_in">Object</span>.getOwnPropertyDescriptors(mixin)</span></code><br><code class="highlight javascript"><span class="line">    ), object)</span></code><br><code class="highlight javascript"><span class="line">&#125;);</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// multiple mixins example</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">let</span> a = &#123;<span class="attr">a</span>: <span class="string">'a'</span>&#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">let</span> b = &#123;<span class="attr">b</span>: <span class="string">'b'</span>&#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">let</span> c = &#123;<span class="attr">c</span>: <span class="string">'c'</span>&#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">let</span> d = mix(c).with(a, b);</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line">d.c <span class="comment">// "c"</span></span></code><br><code class="highlight javascript"><span class="line">d.b <span class="comment">// "b"</span></span></code><br><code class="highlight javascript"><span class="line">d.a <span class="comment">// "a"</span></span></code><br></pre></td></tr></table></figure><h2 id="proto-属性-Object-setPrototypeOf-Object-getPrototypeOf"><a href="#proto-属性-Object-setPrototypeOf-Object-getPrototypeOf" class="headerlink" title="_proto_属性,Object.setPrototypeOf(),Object.getPrototypeOf()"></a>_proto_属性,Object.setPrototypeOf(),Object.getPrototypeOf()</h2><h3 id="proto"><a href="#proto" class="headerlink" title="proto"></a><em>proto</em></h3><p>_proto_属性(前后各两个下划线),用来读取或设置当前对象的prototype对象,所有浏览器都部署了这个属性<br>ES6规定,只有浏览器必须部署这个属性,其他运行环境不一定需要部署,而且新的代码最好认为这个属性是不存在的. 因此最好不要使用这个属性.</p><p>用下面的方法代替:</p><ul><li><code>Object.setPrototypeOf()</code> (写操作)</li><li><code>Object.getPrototypeOf()</code> (读操作)</li><li><code>Object.create()</code> (生成操作)</li></ul><h3 id="Object-setPrototypeOf"><a href="#Object-setPrototypeOf" class="headerlink" title="Object.setPrototypeOf()"></a>Object.setPrototypeOf()</h3><p><code>Object.setPrototypeOf</code>方法的作用于_proto_相同,用来设置一个对象的prototype对象,返回参数对象本身. 它是ES6正式推荐的设置原型对象的方法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="comment">// 格式</span></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.setPrototypeOf(object, prototype)</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// 用法</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">let</span> proto = &#123;&#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">x</span>: <span class="number">10</span> &#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.setPrototypeOf(obj, proto);</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">//将proto对象设为obj对象的原型</span></span></code><br></pre></td></tr></table></figure><p><strong>注意:</strong></p><ul><li>如果第一个参数不是对象,会自动转为对象. 但是由于返回的还是第一个参数,所以这个操作不会产生任何效果:</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.setPrototypeOf(<span class="number">1</span>, &#123;&#125;) === <span class="number">1</span> <span class="comment">// true</span></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.setPrototypeOf(<span class="string">'foo'</span>, &#123;&#125;) === <span class="string">'foo'</span> <span class="comment">// true</span></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.setPrototypeOf(<span class="literal">true</span>, &#123;&#125;) === <span class="literal">true</span> <span class="comment">// true</span></span></code><br></pre></td></tr></table></figure><ul><li>由于undefined和null无法转为对象,所以如果第一个参数是undefined或null,就会报错</li></ul><h3 id="Object-getPrototypeOf"><a href="#Object-getPrototypeOf" class="headerlink" title="Object.getPrototypeOf()"></a>Object.getPrototypeOf()</h3><p>该方法与<code>Object.setPrototypeOf()</code>方法配套,用于读取一个对象的原型对象</p><p>用法: <code>Object.getPrototypeOf(obj)</code></p><p><strong>注意:</strong></p><ul><li>如果参数不是对象,会自动转为对象</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="comment">// 等同于 Object.getPrototypeOf(Number(1))</span></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="number">1</span>)</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// Number &#123;[[PrimitiveValue]]: 0&#125;</span></span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// 等同于 Object.getPrototypeOf(String('foo'))</span></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="string">'foo'</span>)</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// String &#123;length: 0, [[PrimitiveValue]]: ""&#125;</span></span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// 等同于 Object.getPrototypeOf(Boolean(true))</span></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="literal">true</span>)</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// Boolean &#123;[[PrimitiveValue]]: false&#125;</span></span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="number">1</span>) === <span class="built_in">Number</span>.prototype <span class="comment">// true</span></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="string">'foo'</span>) === <span class="built_in">String</span>.prototype <span class="comment">// true</span></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="literal">true</span>) === <span class="built_in">Boolean</span>.prototype <span class="comment">// true</span></span></code><br></pre></td></tr></table></figure><ul><li>如果参数是undefined或null,他们无法转为对象,所以报错.</li></ul><h2 id="Object-keys-Object-values-Object-entries"><a href="#Object-keys-Object-values-Object-entries" class="headerlink" title="Object.keys() , Object.values() , Object.entries()"></a>Object.keys() , Object.values() , Object.entries()</h2><h3 id="Object-keys"><a href="#Object-keys" class="headerlink" title="Object.keys()"></a>Object.keys()</h3><p>该方法返回一个数组,成员是参数对象自身的(不含继承的)所有可遍历属性的键名</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">foo</span>: <span class="string">'bar'</span>, <span class="attr">baz</span>: <span class="number">42</span> &#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.keys(obj)</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// ["foo", "baz"]</span></span></code><br></pre></td></tr></table></figure><h3 id="Object-values"><a href="#Object-values" class="headerlink" title="Object.values()"></a>Object.values()</h3><p>该方法返回一个数组,成员是参数对象自身的(不含继承的)所有可遍历属性的键值</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">foo</span>: <span class="string">'bar'</span>, <span class="attr">baz</span>: <span class="number">42</span> &#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.values(obj)</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// ["bar", 42]</span></span></code><br></pre></td></tr></table></figure><p>返回数组的成员顺序为:</p><ul><li>首先遍历所有数值键，按照数值升序排列。</li><li>其次遍历所有字符串键，按照加入时间升序排列。</li><li>最后遍历所有 Symbol 键，按照加入时间升序排列。</li></ul><p><strong>注意:</strong></p><ul><li><code>Object.values</code>只返回对象自身的可遍历属性[不是显示声明的属性默认是不可遍历的]</li><li><code>Object.values</code>会过滤属性名为Symbol值的属性</li><li>如果<code>Object.values</code>方法的参数是一个字符串,会返回各个字符组成的一个数组</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.values(<span class="string">'foo'</span>)</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// ['f', 'o', 'o']</span></span></code><br></pre></td></tr></table></figure><ul><li>如果参数不是对象,<code>Object.values</code>会先将其转为对象,由于数值和布尔值的包装对象,都不会为实例添加非继承的属性,所以会返回空数组</li></ul><h3 id="Object-entries"><a href="#Object-entries" class="headerlink" title="Object.entries()"></a>Object.entries()</h3><p>该方法返回一个数组,成员是参数对象自身(不含继承的)所有可遍历属性的键值对数组<br>除了返回值不一样,该方法的行为与<code>Object.values</code>基本一致.</p><p><strong>用处一:</strong></p><p>将对象转为真正的Map结构</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">foo</span>: <span class="string">'bar'</span>, <span class="attr">baz</span>: <span class="number">42</span> &#125;;</span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="built_in">Object</span>.entries(obj));</span></code><br><code class="highlight javascript"><span class="line">map <span class="comment">// Map &#123; foo: "bar", baz: 42 &#125;</span></span></code><br></pre></td></tr></table></figure><h2 id="Object-fromEntries"><a href="#Object-fromEntries" class="headerlink" title="Object.fromEntries()"></a>Object.fromEntries()</h2><p>该方法是<code>Object.entries()</code>的逆操作.用于将一个键值对数组转为对象.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.fromEntries([</span></code><br><code class="highlight javascript"><span class="line">  [<span class="string">'foo'</span>, <span class="string">'bar'</span>],</span></code><br><code class="highlight javascript"><span class="line">  [<span class="string">'baz'</span>, <span class="number">42</span>]</span></code><br><code class="highlight javascript"><span class="line">])</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// &#123; foo: "bar", baz: 42 &#125;</span></span></code><br></pre></td></tr></table></figure><p>该方法的目的是将键值对的数据结构还原为对象,因此特别适合将Map结构转为对象</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="comment">// 例一</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> entries = <span class="keyword">new</span> <span class="built_in">Map</span>([</span></code><br><code class="highlight javascript"><span class="line">  [<span class="string">'foo'</span>, <span class="string">'bar'</span>],</span></code><br><code class="highlight javascript"><span class="line">  [<span class="string">'baz'</span>, <span class="number">42</span>]</span></code><br><code class="highlight javascript"><span class="line">]);</span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.fromEntries(entries)</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// &#123; foo: "bar", baz: 42 &#125;</span></span></code><br><code class="highlight javascript"><span class="line"></span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// 例二</span></span></code><br><code class="highlight javascript"><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="string">'foo'</span>, <span class="literal">true</span>).set(<span class="string">'bar'</span>, <span class="literal">false</span>);</span></code><br><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.fromEntries(map)</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// &#123; foo: true, bar: false &#125;</span></span></code><br></pre></td></tr></table></figure><p><strong>用处二:</strong></p><p>配合<code>URLSearchParams</code>对象,将查询字符串转为对象</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="highlight javascript"><span class="line"><span class="built_in">Object</span>.fromEntries(<span class="keyword">new</span> URLSearchParams(<span class="string">'foo=bar&amp;baz=qux'</span>))</span></code><br><code class="highlight javascript"><span class="line"><span class="comment">// &#123; foo: "bar", baz: "qux" &#125;</span></span></code><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-tags"><a href="/tags/ES6/" rel="tag"># ES6</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019/10/18/ECMAScript6/6%E3%80%81%E5%87%BD%E6%95%B0%E7%9A%84%E6%89%A9%E5%B1%95/" rel="next" title="ECMAScript6--函数的扩展"><i class="fa fa-chevron-left"></i> ECMAScript6--函数的扩展</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2019/12/02/vue2.0/Vue-Study1/" rel="prev" title="vue.js2.0学习(一)——基础">vue.js2.0学习(一)——基础 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="刘凯"><p class="site-author-name" itemprop="name">刘凯</p><p class="site-description motion-element" itemprop="description">登高必自卑，行远必自迩。</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives"><span class="site-state-item-count">12</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">3</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">2</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Tolerating" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:354378485@qq.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://blog.csdn.net/qq_25405005" target="_blank" title="CSDN"><i class="fa fa-fw fa-contao"></i>CSDN</a> </span><span class="links-of-author-item"><a href="https://blog.csdn.net/qq_25405005" target="_blank" title="微信"><i class="fa fa-fw fa-weixin"></i>微信</a> </span><span class="links-of-author-item"><a href="https://blog.csdn.net/qq_25405005" target="_blank" title="QQ"><i class="fa fa-fw fa-qq"></i>QQ</a> </span><span class="links-of-author-item"><a href="https://space.bilibili.com/19496491" target="_blank" title="bilibili"><i class="fa fa-fw fa-link"></i>bilibili</a></span></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#属性的简洁表示法"><span class="nav-number">1.</span> <span class="nav-text">属性的简洁表示法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#属性名表达式"><span class="nav-number">2.</span> <span class="nav-text">属性名表达式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#方法的name属性"><span class="nav-number">3.</span> <span class="nav-text">方法的name属性</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#属性的可枚举性和遍历"><span class="nav-number">4.</span> <span class="nav-text">属性的可枚举性和遍历</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#可枚举性"><span class="nav-number">4.1.</span> <span class="nav-text">可枚举性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#属性的遍历"><span class="nav-number">4.2.</span> <span class="nav-text">属性的遍历</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#for…in"><span class="nav-number">4.2.1.</span> <span class="nav-text">for…in</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Object-keys-obj"><span class="nav-number">4.2.2.</span> <span class="nav-text">Object.keys(obj)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Object-getOwnPropertyNames-obj"><span class="nav-number">4.2.3.</span> <span class="nav-text">Object.getOwnPropertyNames(obj)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Object-getOwnPropertySymbols-obj"><span class="nav-number">4.2.4.</span> <span class="nav-text">Object.getOwnPropertySymbols(obj)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Reflect-ownKeys-obj"><span class="nav-number">4.2.5.</span> <span class="nav-text">Reflect.ownKeys(obj)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#super关键字"><span class="nav-number">5.</span> <span class="nav-text">super关键字</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#对象的扩展运算符"><span class="nav-number">6.</span> <span class="nav-text">对象的扩展运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#解构赋值"><span class="nav-number">6.1.</span> <span class="nav-text">解构赋值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#扩展运算符"><span class="nav-number">6.2.</span> <span class="nav-text">扩展运算符</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#对象的新增方法"><span class="nav-number">7.</span> <span class="nav-text">对象的新增方法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Object-is"><span class="nav-number">7.1.</span> <span class="nav-text">Object.is()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Object-assign"><span class="nav-number">7.2.</span> <span class="nav-text">Object.assign()</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本用法"><span class="nav-number">7.2.1.</span> <span class="nav-text">基本用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常见用途"><span class="nav-number">7.2.2.</span> <span class="nav-text">常见用途</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Object-getOwnPropertyDescriptors"><span class="nav-number">7.3.</span> <span class="nav-text">Object.getOwnPropertyDescriptors()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#proto-属性-Object-setPrototypeOf-Object-getPrototypeOf"><span class="nav-number">7.4.</span> <span class="nav-text">_proto_属性,Object.setPrototypeOf(),Object.getPrototypeOf()</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#proto"><span class="nav-number">7.4.1.</span> <span class="nav-text">proto</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Object-setPrototypeOf"><span class="nav-number">7.4.2.</span> <span class="nav-text">Object.setPrototypeOf()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Object-getPrototypeOf"><span class="nav-number">7.4.3.</span> <span class="nav-text">Object.getPrototypeOf()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Object-keys-Object-values-Object-entries"><span class="nav-number">7.5.</span> <span class="nav-text">Object.keys() , Object.values() , Object.entries()</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Object-keys"><span class="nav-number">7.5.1.</span> <span class="nav-text">Object.keys()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Object-values"><span class="nav-number">7.5.2.</span> <span class="nav-text">Object.values()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Object-entries"><span class="nav-number">7.5.3.</span> <span class="nav-text">Object.entries()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Object-fromEntries"><span class="nav-number">7.6.</span> <span class="nav-text">Object.fromEntries()</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2019</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">刘凯</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user">本站访客数</i> <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人次 </span><span class="site-pv"><i class="fa fa-eye">本站总访问量</i> <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js"></script><script type="text/javascript" src="/js/src/motion.js"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script type="text/javascript">// Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });</script></body></html>